<?xml version="1.0" encoding="utf-8" ?>
<PacketDefinitions xmlns="http://www.munique.net/OpenMU/PacketDefinitions">
  <Description>This file contains all packet definitions for packets which are sent from game server to client.</Description>
  <Structures />
  <Packets>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>F1</Code>
      <SubCode>00</SubCode>
      <Name>ServerInfo</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen>After a game client has connected to the game.</SentWhen>
      <CausedReaction>It shows the login dialog.</CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Byte</Type>
          <Name>Success</Name>
        </Field>
        <Field>
          <Index>5</Index>
          <Type>Short</Type>
          <Name>PlayerId</Name>
        </Field>
        <Field>
          <Index>7</Index>
          <Type>String</Type>
          <Name>Version</Name>
          <Length>5</Length>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>F1</Code>
      <SubCode>01</SubCode>
      <Name>LoginResponse</Name>
      <Length>5</Length>
      <Direction>ServerToClient</Direction>
      <SentWhen>After the login request has been processed by the server.</SentWhen>
      <CausedReaction>Shows the result. When it was successful, the client proceeds by sending a character list request.</CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Enum</Type>
          <TypeName>LoginResult</TypeName>
          <Name>Success</Name>
        </Field>
      </Fields>
      <Enums>
        <Enum>
          <Name>LoginResult</Name>
          <Description>The result of a login request.</Description>
          <Values>
            <EnumValue>
              <Name>InvalidPassword</Name>
              <Description>The password was wrong.</Description>
              <Value>0</Value>
            </EnumValue>
            <EnumValue>
              <Name>Okay</Name>
              <Description>The login succeeded.</Description>
              <Value>1</Value>
            </EnumValue>
            <EnumValue>
              <Name>AccountInvalid</Name>
              <Description>The account is invalid.</Description>
              <Value>2</Value>
            </EnumValue>
            <EnumValue>
              <Name>AccountAlreadyConnected</Name>
              <Description>The account is already connected.</Description>
              <Value>3</Value>
            </EnumValue>
            <EnumValue>
              <Name>ServerIsFull</Name>
              <Description>The server is full.</Description>
              <Value>4</Value>
            </EnumValue>
            <EnumValue>
              <Name>AccountBlocked</Name>
              <Description>The account is blocked.</Description>
              <Value>5</Value>
            </EnumValue>
            <EnumValue>
              <Name>WrongVersion</Name>
              <Description>The game client has the wrong version.</Description>
              <Value>6</Value>
            </EnumValue>
            <EnumValue>
              <Name>ConnectionError</Name>
              <Description>An internal error occured during connection.</Description>
              <Value>7</Value>
            </EnumValue>
            <EnumValue>
              <Name>ConnectionClosed3Fails</Name>
              <Description>Connection closed because of three failed login requests.</Description>
              <Value>8</Value>
            </EnumValue>
            <EnumValue>
              <Name>NoChargeInfo</Name>
              <Description>There is no payment information.</Description>
              <Value>9</Value>
            </EnumValue>
            <EnumValue>
              <Name>SubscriptionTermOver</Name>
              <Description>The subscription term is over.</Description>
              <Value>10</Value>
            </EnumValue>
            <EnumValue>
              <Name>SubscriptionTimeOver</Name>
              <Description>The subscription time is over.</Description>
              <Value>11</Value>
            </EnumValue>
            <EnumValue>
              <Name>TemporaryBlocked</Name>
              <Description>The account is temporarily blocked.</Description>
              <Value>14</Value>
            </EnumValue>
            <EnumValue>
              <Name>OnlyPlayersOver15Yrs</Name>
              <Description>Only players over 15 years are allowed to connect.</Description>
              <Value>17</Value>
            </EnumValue>
            <EnumValue>
              <Name>BadCountry</Name>
              <Description>The client connected from a blocked country.</Description>
              <Value>210</Value>
            </EnumValue>
          </Values>
        </Enum>
      </Enums>
    </Packet>
    <Packet>
      <HeaderType>C1Header</HeaderType>
      <Code>00</Code>
      <Name>ChatMessage</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen>A player sends a chat message.</SentWhen>
      <CausedReaction>The message is shown in the chat box and above the character of the sender.</CausedReaction>
      <Fields>
        <Field>
          <Index>2</Index>
          <Type>Enum</Type>
          <TypeName>ChatMessageType</TypeName>
          <Name>Type</Name>
        </Field>
        <Field>
          <Index>3</Index>
          <Type>String</Type>
          <Name>Sender</Name>
          <Length>10</Length>
        </Field>
        <Field>
          <Index>13</Index>
          <Type>String</Type>
          <Name>Message</Name>
        </Field>
      </Fields>
      <Enums>
        <Enum>
          <Name>ChatMessageType</Name>
          <Description>Defines the type of a chat message.</Description>
          <Values>
            <EnumValue>
              <Name>Normal</Name>
              <Description>The message is a normal chat message, e.g. public, within a party or guild.</Description>
              <Value>0</Value>
            </EnumValue>
            <EnumValue>
              <Name>Whisper</Name>
              <Description>The message is sent privately to the receiving player.</Description>
              <Value>2</Value>
            </EnumValue>
          </Values>
        </Enum>
      </Enums>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>26</Code>
      <SubCode>FE</SubCode>
      <Name>CurrentHealthAndShield</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Short</Type>
          <Name>Health</Name>
        </Field>
        <Field>
          <Index>7</Index>
          <Type>Short</Type>
          <Name>Shield</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>26</Code>
      <SubCode>FF</SubCode>
      <Name>MaximumHealthAndShield</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Short</Type>
          <Name>Health</Name>
        </Field>
        <Field>
          <Index>7</Index>
          <Type>Short</Type>
          <Name>Shield</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>27</Code>
      <SubCode>FE</SubCode>
      <Name>CurrentManaAndAbility</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Short</Type>
          <Name>Mana</Name>
        </Field>
        <Field>
          <Index>6</Index>
          <Type>Short</Type>
          <Name>Ability</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>27</Code>
      <SubCode>FF</SubCode>
      <Name>MaximumManaAndAbility</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Short</Type>
          <Name>Mana</Name>
        </Field>
        <Field>
          <Index>6</Index>
          <Type>Short</Type>
          <Name>Ability</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C3Header</HeaderType>
      <Code>29</Code>
      <Name>ConsumeItemWithEffect</Name>
      <Length>6</Length>
      <Direction>ServerToClient</Direction>
      <SentWhen>The client requested to consume a special item, e.g. a bottle of Ale.</SentWhen>
      <CausedReaction>The player is shown in a red color and has increased attack speed.</CausedReaction>
      <Fields>
        <Field>
          <Index>3</Index>
          <Type>Enum</Type>
          <TypeName>ConsumedItemType</TypeName>
          <Name>ItemType</Name>
        </Field>
        <Field>
          <Index>4</Index>
          <Type>Short</Type>
          <Name>EffectTimeInSeconds</Name>
        </Field>
      </Fields>
      <Enums>
        <Enum>
          <Name>ConsumedItemType</Name>
          <Description>Defines a consumed item.</Description>
          <Values>
            <EnumValue>
              <Name>Ale</Name>
              <Description>The player consumes a bottle of ale, usually 80 seconds effect time.</Description>
              <Value>0</Value>
            </EnumValue>
            <EnumValue>
              <Name>RedemyOfLove</Name>
              <Description>The player consumes a redemy of love, usually 90 seconds effect time.</Description>
              <Value>1</Value>
            </EnumValue>
            <EnumValue>
              <Name>PotionOfSoul</Name>
              <Description>The player consumes a potion of soul, usually 60 seconds effect time.</Description>
              <Value>77</Value>
            </EnumValue>
          </Values>
        </Enum>
        
      </Enums>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>F3</Code>
      <SubCode>00</SubCode>
      <Name>CharacterList</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen>After the game client requested it, usually after a successful login.</SentWhen>
      <CausedReaction>The game client shows the available characters of the account.</CausedReaction>
      <Fields>
        <Field>
          <Index>6</Index>
          <Type>Byte</Type>
          <Name>Number of characters</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>F3</Code>
      <SubCode>01</SubCode>
      <Name>CharacterCreationResult</Name>
      <Length>42</Length>
      <Direction>ServerToClient</Direction>
      <SentWhen>After the server processed a character creation request.</SentWhen>
      <CausedReaction>If successful, the new character is shown in the character list; Otherwise, a message is shown that it failed. </CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Boolean</Type>
          <Name>Success</Name>
        </Field>
        <Field>
          <Index>5</Index>
          <Type>String</Type>
          <Name>CharacterName</Name>
          <Length>10</Length>
        </Field>
        <Field>
          <Index>15</Index>
          <Type>Byte</Type>
          <Name>CharacterSlot</Name>
        </Field>
        <Field>
          <Index>16</Index>
          <Type>ShortBigEndian</Type>
          <Name>Level</Name>
        </Field>
        <Field>
          <Index>18</Index>
          <LeftShifted>3</LeftShifted>
          <Type>Enum</Type>
          <TypeName>CharacterClassNumber</TypeName>
          <Name>Class</Name>
        </Field>
        <Field>
          <Index>19</Index>
          <Type>Byte</Type>
          <Name>CharacterStatus</Name>
        </Field>
        <Field>
          <Index>20</Index>
          <Type>Binary</Type>
          <Name>PreviewData</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>F3</Code>
      <SubCode>11</SubCode>
      <Name>SkillListUpdate</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Byte</Type>
          <Name>Count</Name>
          <Description>Mixed usage: Skill list count (when list). 0xFE when adding a skill, 0xFF when removing a Skill.</Description>
        </Field>
        <Field>
          <Index>6</Index>
          <Type>Byte</Type>
          <Name>SkillIndex</Name>
          <Description>Skill index (when added)</Description>
        </Field>
        <Field>
          <Index>7</Index>
          <Type>ShortBigEndian</Type>
          <Name>SkillId</Name>
          <Description>Skill id (when added)</Description>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>F3</Code>
      <SubCode>15</SubCode>
      <Name>CharacterFocused</Name>
      <Length>15</Length>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>String</Type>
          <Name>CharacterName</Name>
          <Length>10</Length>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>F3</Code>
      <SubCode>06</SubCode>
      <Name>CharacterStatIncreaseResponse</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen>After the server processed a character stat increase request packet.</SentWhen>
      <CausedReaction>If it was successful, adds a point to the requested stat type.</CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Byte</Type>
          <Name>Result</Name>
          <Description>Result (first 4 bit) and Stat Type (last 4 bit)</Description>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>F3</Code>
      <SubCode>02</SubCode>
      <Name>CharacterDeleteResponse</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Byte</Type>
          <Name>Result</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>F3</Code>
      <SubCode>05</SubCode>
      <Name>CharacterLevelUpdate</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen>After a character leveled up.</SentWhen>
      <CausedReaction>Updates the level (and other related stats) in the game client and shows an effect.</CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>ShortBigEndian</Type>
          <Name>Level</Name>
        </Field>
        <Field>
          <Index>6</Index>
          <Type>ShortBigEndian</Type>
          <Name>LevelUpPoints</Name>
        </Field>
        <Field>
          <Index>8</Index>
          <Type>ShortBigEndian</Type>
          <Name>MaximumHealth</Name>
        </Field>
        <Field>
          <Index>10</Index>
          <Type>ShortBigEndian</Type>
          <Name>MaximumMana</Name>
        </Field>
        <Field>
          <Index>12</Index>
          <Type>ShortBigEndian</Type>
          <Name>MaximumShield</Name>
        </Field>
        <Field>
          <Index>14</Index>
          <Type>ShortBigEndian</Type>
          <Name>MaximumAbility</Name>
        </Field>
        <Field>
          <Index>16</Index>
          <Type>ShortBigEndian</Type>
          <Name>FruitPoints</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C3HeaderWithSubCode</HeaderType>
      <Code>F3</Code>
      <SubCode>03</SubCode>
      <Name>CharacterInformation</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen>After the character was selected by the player and entered the game.</SentWhen>
      <CausedReaction>The characters enters the game world.</CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Byte</Type>
          <Name>X</Name>
        </Field>
        <Field>
          <Index>5</Index>
          <Type>Byte</Type>
          <Name>Y</Name>
        </Field>
        <Field>
          <Index>6</Index>
          <Type>ShortBigEndian</Type>
          <Name>MapId</Name>
        </Field>
        <Field>
          <Index>8</Index>
          <Type>Long</Type>
          <Name>CurrentExperience</Name>
        </Field>
        <Field>
          <Index>16</Index>
          <Type>Long</Type>
          <Name>ExperienceForNextLevel</Name>
        </Field>
        <Field>
          <Index>24</Index>
          <Type>ShortBigEndian</Type>
          <Name>LevelUpPoints</Name>
        </Field>
        <Field>
          <Index>26</Index>
          <Type>ShortBigEndian</Type>
          <Name>Strength</Name>
        </Field>
        <Field>
          <Index>28</Index>
          <Type>ShortBigEndian</Type>
          <Name>Agility</Name>
        </Field>
        <Field>
          <Index>30</Index>
          <Type>ShortBigEndian</Type>
          <Name>Vitality</Name>
        </Field>
        <Field>
          <Index>32</Index>
          <Type>ShortBigEndian</Type>
          <Name>Energy</Name>
        </Field>
        <Field>
          <Index>34</Index>
          <Type>ShortBigEndian</Type>
          <Name>CurrentHealth</Name>
        </Field>
        <Field>
          <Index>36</Index>
          <Type>ShortBigEndian</Type>
          <Name>MaximumHealth</Name>
        </Field>
        <Field>
          <Index>38</Index>
          <Type>ShortBigEndian</Type>
          <Name>CurrentMana</Name>
        </Field>
        <Field>
          <Index>40</Index>
          <Type>ShortBigEndian</Type>
          <Name>MaximumMana</Name>
        </Field>
        <Field>
          <Index>42</Index>
          <Type>ShortBigEndian</Type>
          <Name>CurrentShield</Name>
        </Field>
        <Field>
          <Index>44</Index>
          <Type>ShortBigEndian</Type>
          <Name>MaximumShield</Name>
        </Field>
        <Field>
          <Index>46</Index>
          <Type>ShortBigEndian</Type>
          <Name>CurrentAbility</Name>
        </Field>
        <Field>
          <Index>48</Index>
          <Type>ShortBigEndian</Type>
          <Name>MaximumAbility</Name>
        </Field>
        <Field>
          <Index>50</Index>
          <Type>ShortBigEndian</Type>
          <Name>Unknown</Name>
        </Field>
        <Field>
          <Index>52</Index>
          <Type>IntegerBigEndian</Type>
          <Name>Money</Name>
        </Field>
        <Field>
          <Index>56</Index>
          <Type>Byte</Type>
          <Name>PlayerKillLevel</Name>
        </Field>
        <Field>
          <Index>57</Index>
          <Type>Byte</Type>
          <Name>CtlCode</Name>
        </Field>
        <Field>
          <Index>58</Index>
          <Type>ShortBigEndian</Type>
          <Name>UsedFruitPoints</Name>
        </Field>
        <Field>
          <Index>58</Index>
          <Type>ShortBigEndian</Type>
          <Name>MaxFruitPoints</Name>
        </Field>
        <Field>
          <Index>60</Index>
          <Type>ShortBigEndian</Type>
          <Name>Command</Name>
        </Field>
        <Field>
          <Index>62</Index>
          <Type>ShortBigEndian</Type>
          <Name>UsedNegativeFruitPoints</Name>
        </Field>
        <Field>
          <Index>64</Index>
          <Type>ShortBigEndian</Type>
          <Name>MaxNegativeFruitPoints</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C4HeaderWithSubCode</HeaderType>
      <Code>F3</Code>
      <SubCode>10</SubCode>
      <Name>CharacterInventory</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>5</Index>
          <Type>Byte</Type>
          <Name>ItemCount</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1HeaderWithSubCode</HeaderType>
      <Code>F3</Code>
      <SubCode>14</SubCode>
      <Name>ItemUpgraded</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Byte</Type>
          <Name>ItemSlot</Name>
        </Field>
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C1Header</HeaderType>
      <Code>0D</Code>
      <Name>ServerMessage</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>3</Index>
          <Type>Enum</Type>
          <TypeName>MessageType</TypeName>
          <Name>Type</Name>
        </Field>
        <Field>
          <Index>4</Index>
          <Type>String</Type>
          <Name>Message</Name>
        </Field>
      </Fields>
      <Enums>
        <Enum>
          <Name>MessageType</Name>
          <Description>Defines a type of a server message.</Description>
          <Values>
            <EnumValue>
              <Name>GoldenCenter</Name>
              <Description>The message is shown as centered golden message in the client.</Description>
              <Value>0</Value>
            </EnumValue>
            <EnumValue>
              <Name>BlueNormal</Name>
              <Description>The message is shown as a blue system message.</Description>
              <Value>1</Value>
            </EnumValue>
            <EnumValue>
              <Name>GuildNotice</Name>
              <Description>The message is a guild notice, centered in green.</Description>
              <Value>2</Value>
            </EnumValue>
          </Values>
        </Enum>
      </Enums>
    </Packet>
    <Packet>
      <HeaderType>C2Header</HeaderType>
      <Code>12</Code>
      <Name>PlayerMeet</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Byte</Type>
          <Name>PlayerCount</Name>
        </Field>
        <!-- TODO: Structures -->
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C2Header</HeaderType>
      <Code>13</Code>
      <Name>NpcMeet</Name>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Byte</Type>
          <Name>NpcCount</Name>
        </Field>
        <!-- TODO: Structures -->
      </Fields>
    </Packet>
    <Packet>
      <HeaderType>C2Header</HeaderType>
      <Code>C0</Code>
      <Name>MessengerInitialization</Name>
      <Caption>MUssenger initialization / friend list</Caption>
      <Direction>ServerToClient</Direction>
      <SentWhen></SentWhen>
      <CausedReaction></CausedReaction>
      <Fields>
        <Field>
          <Index>4</Index>
          <Type>Byte</Type>
          <Name>LetterCount</Name>
        </Field>
        <Field>
          <Index>5</Index>
          <Type>Byte</Type>
          <Name>MaximumLetterCount</Name>
        </Field>
        <Field>
          <Index>6</Index>
          <Type>Byte</Type>
          <Name>FriendCount</Name>
        </Field>
      </Fields>
    </Packet>
    
  </Packets>
</PacketDefinitions>